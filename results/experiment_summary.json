{
  "experiment": "PaddleOCR VIN Recognition Pipeline",
  "date": "2025-01-20",
  "config": {
    "ocr_version": "PP-OCRv4",
    "paddleocr_version": "3.3.2",
    "text_det_thresh": 0.3,
    "text_det_box_thresh": 0.3,
    "text_rec_score_thresh": 0.3,
    "use_doc_orientation_classify": false,
    "use_doc_unwarping": false,
    "use_textline_orientation": false,
    "lang": "en"
  },
  "pipeline": {
    "preprocessing": {
      "enabled": true,
      "mode": "engraved",
      "steps": ["grayscale", "CLAHE_contrast_normalize", "bilateral_filter"],
      "purpose": "Enhance contrast for engraved metal plate text"
    },
    "postprocessing": {
      "enabled": true,
      "artifact_removal": ["*", "#", "X", "I", "Y", "T", "F", "A"],
      "invalid_char_fixes": {
        "I": "1",
        "O": "0",
        "Q": "0"
      },
      "position_based_fixes": {
        "positions_12_17": {
          "S": "5",
          "G": "6",
          "B": "8",
          "A": "4",
          "L": "1",
          "Z": "2"
        }
      },
      "checksum_validation": true
    }
  },
  "dataset": {
    "source": "DagsHub (Thundastormgod/core-vin)",
    "total_images": 381,
    "sample_size_for_metrics": 20,
    "image_format": "jpg/png",
    "ground_truth_source": "filename"
  },
  "results": {
    "baseline_no_pipeline": {
      "exact_match_rate": 0.05,
      "f1_score": 0.430,
      "precision": 0.417,
      "recall": 0.444,
      "cer_mean": 0.165
    },
    "with_pipeline": {
      "exact_match_rate": 0.25,
      "near_match_rate_90pct": 0.25,
      "f1_score": 0.553,
      "precision": "improved",
      "recall": "improved",
      "cer_mean": 0.241,
      "avg_processing_time_ms": 3306
    },
    "improvement": {
      "exact_match": "+400% (5% → 25%)",
      "f1_score": "+29% (43% → 55%)"
    }
  },
  "character_confusion_analysis": {
    "handled_confusions": {
      "auto_fixed": {
        "I→1": "I is invalid in VIN, always convert",
        "O→0": "O is invalid in VIN, always convert",
        "Q→0": "Q is invalid in VIN, always convert"
      },
      "position_based": {
        "S→5": "In positions 12-17 (sequential number)",
        "G→6": "In positions 12-17 (sequential number)",
        "B→8": "In positions 12-17 (sequential number)",
        "A→4": "In positions 12-17 (sequential number)",
        "L→1": "In positions 12-17 (sequential number)",
        "Z→2": "In positions 12-17 (sequential number)"
      }
    },
    "remaining_confusions": {
      "0↔6": "Still challenging - similar shapes",
      "A↔S": "Visually similar in some fonts",
      "P↔9": "Upper portion looks similar"
    }
  },
  "technical_details": {
    "preprocessing": {
      "CLAHE": {
        "purpose": "Contrast Limited Adaptive Histogram Equalization",
        "clip_limit": 2.0,
        "tile_size": [8, 8],
        "effect": "Enhances local contrast without amplifying noise"
      },
      "bilateral_filter": {
        "purpose": "Edge-preserving noise reduction",
        "d": 5,
        "sigma_color": 50,
        "sigma_space": 50,
        "effect": "Smooths noise while keeping edges sharp"
      }
    },
    "ocr_optimization": {
      "disabled_features": [
        "Document orientation classification (saves ~2s/image)",
        "Document unwarping (saves ~1s/image)",
        "Textline orientation (saves ~0.5s/image)"
      ],
      "thresholds_lowered": {
        "reason": "Engraved text often has lower confidence scores",
        "effect": "Catches faint engravings that would be missed"
      }
    }
  },
  "recommendations": [
    "Fine-tune on VIN-specific dataset for 0↔6, A↔S confusions",
    "Add image quality scoring to reject blurry images",
    "Consider multi-image voting for critical applications",
    "Add manufacturer-specific rules for WMI section"
  ]
}
